<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans file:/opt/schemas/spring-beans-2.5.xsd"
	default-init-method="init" default-destroy-method="destroy">

	<!-- Queues and topic producers and consumers -->

	<bean id="hl7Producer" class="higiebus.tools.jms.Producer">
		<property name="subject" value="HIGIEBUS.HL7_MESSAGE" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>

	<bean id="hl7QConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject"
			value="HIGIEBUS.QUEUES.HL7_MESSAGE?consumer.exclusive=true" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>
	<bean id="hl7TConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject" value="HIGIEBUS.TOPICS.HL7_MESSAGE" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="topic" value="true" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>

	<bean id="busControlTopic" class="org.apache.activemq.command.ActiveMQTopic">
		<constructor-arg value="HIGIEBUS.BUS_CONTROL" />
	</bean>

	<bean id="busControlProducer" class="higiebus.tools.jms.Producer">
		<property name="subject" value="HIGIEBUS.BUS_CONTROL" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>

	<bean id="busControlQConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject"
			value="HIGIEBUS.QUEUES.BUS_CONTROL?consumer.exclusive=true" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>

	<bean id="busControlTConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject" value="HIGIEBUS.TOPICS.BUS_CONTROL" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="topic" value="true" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>

	<bean id="busMessageProducer" class="higiebus.tools.jms.Producer">
		<property name="subject" value="HIGIEBUS.BUS_DATA" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>

	<bean id="busMessageQConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject"
			value="HIGIEBUS.QUEUES.BUS_DATA?consumer.exclusive=true" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>
	<bean id="busMessageTConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject" value="HIGIEBUS.TOPICS.BUS_DATA" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="topic" value="true" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>

	<bean id="alertProducer" class="higiebus.tools.jms.Producer">
		<property name="subject" value="HIGIEBUS.ALERT" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>
	<bean id="alertQConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject"
			value="HIGIEBUS.QUEUES.ALERT?consumer.exclusive=true" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>
	<bean id="alertTConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject" value="HIGIEBUS.TOPICS.ALERT" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="topic" value="true" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>

	<bean id="workstnProducer" class="higiebus.tools.jms.Producer">
		<property name="subject" value="HIGIEBUS.WORKSTATION_EVENT" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>
	
	<bean id="workstnQConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject"
			value="HIGIEBUS.QUEUES.WORKSTATION_REQUEST?consumer.exclusive=true" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>
	
	<bean id="workstnTConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject" value="HIGIEBUS.TOPICS.WORKSTATION_EVENT" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="topic" value="true" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>
	
	<bean id="workstnTopic" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg value="HIGIEBUS.TOPICS.WORKSTATION_EVENT" />
	</bean>
	
	<bean id="workstnRequestQ" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg value="HIGIEBUS.QUEUES.WORKSTATION_REQUEST?consumer.exclusive=true" />
	</bean>

	<bean id="hmsEventQueue" class="org.apache.activemq.command.ActiveMQQueue">
		<constructor-arg value="HIGIEBUS.QUEUES.HMS_EVENT?consumer.exclusive=true" />
	</bean>



	<bean id="hmsQConsumer" class="higiebus.tools.jms.Consumer">
		<property name="subject"
			value="HIGIEBUS.QUEUES.HMS_EVENT?consumer.exclusive=true" />
		<property name="connectionFactory" ref="connectionFactoryBean" />
		<property name="transacted" value="false" />
		<property name="name" value="HIGIEBUSCore" />
		<property name="ackMode" value="AUTO_ACKNOWLEDGE" />
	</bean>

	<!--  Spring stuff -->

	<bean id="customEditorConfigurer"
		class="org.springframework.beans.factory.config.CustomEditorConfigurer">
		<property name="customEditors">
			<map>
				<entry key="java.util.Date">
					<bean class="higiebus.core.DatePropertyEditor">
						<property name="pattern" value="yyyyMMdd" />
					</bean>
				</entry>
			</map>
		</property>
	</bean>

	<bean id="busCacheFactory"
		class="higiebus.bus.cache.BusCacheFactory">
	</bean>

	<bean id="busCache" factory-bean="busCacheFactory" factory-method="createInstance">
	</bean>
	

</beans>